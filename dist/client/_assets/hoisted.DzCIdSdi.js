const r=document.getElementById("contact-form"),F=document.getElementById("form-success"),f=document.getElementById("form-error"),c=document.getElementById("error-text"),I=document.getElementById("painPoint-select"),v=document.getElementById("other-description-container"),h=document.getElementById("other-description"),d=document.getElementById("btn-text"),g=document.getElementById("btn-icon"),L=document.getElementById("btn-spinner"),i=r?.querySelector('button[type="submit"]');I?.addEventListener("change",()=>{I.value==="otro"?(v?.classList.remove("hidden"),v?.classList.add("animate-fadeIn"),h?.setAttribute("required","true")):(v?.classList.add("hidden"),v?.classList.remove("animate-fadeIn"),h?.removeAttribute("required"),h&&(h.value=""))});r?.querySelectorAll(".form-input").forEach(e=>{e.addEventListener("input",()=>{e.classList.remove("border-red-500","bg-red-500/10"),e.classList.add("border-white/10"),f?.classList.add("hidden")})});r?.addEventListener("submit",async e=>{e.preventDefault(),f?.classList.add("hidden"),r.querySelectorAll(".form-input").forEach(s=>{s.classList.remove("border-red-500","bg-red-500/10")});const t=new FormData(r),o=Object.fromEntries(t);d&&(d.textContent="Procesando..."),g?.classList.add("hidden"),L?.classList.remove("hidden"),i&&(i.disabled=!0);try{const s=await fetch("/api/audit-submission",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),n=await s.json();if(!s.ok){n.errors&&n.errors.length>0?(c&&(c.textContent=n.errors[0].message),f?.classList.remove("hidden"),n.errors.forEach(a=>{const m=r.querySelector(`[name="${a.field}"]`);m&&(m.classList.remove("border-white/10"),m.classList.add("border-red-500","bg-red-500/10"))})):(c&&(c.textContent=n.error||"Error al enviar"),f?.classList.remove("hidden")),d&&(d.textContent="Solicita nuestros servicios"),g?.classList.remove("hidden"),L?.classList.add("hidden"),i&&(i.disabled=!1);return}r.classList.add("hidden"),F?.classList.remove("hidden")}catch(s){console.error("Error:",s),c&&(c.textContent="Error de conexiÃ³n. Intenta de nuevo."),f?.classList.remove("hidden"),d&&(d.textContent="Solicita nuestros servicios"),g?.classList.remove("hidden"),L?.classList.add("hidden"),i&&(i.disabled=!1)}});const u=document.getElementById("navbar"),P=document.getElementById("mobile-menu-btn"),p=document.getElementById("mobile-menu"),B=document.getElementById("menu-icon"),S=document.getElementById("close-icon");P?.addEventListener("click",()=>{p?.classList.toggle("hidden"),B?.classList.toggle("hidden"),S?.classList.toggle("hidden")});p?.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>{p.classList.add("hidden"),B?.classList.remove("hidden"),S?.classList.add("hidden")})});let x=0;window.addEventListener("scroll",()=>{const e=window.scrollY;u&&(e>50?u.classList.add("scrolled"):u.classList.remove("scrolled"),e>x&&e>100?u.style.transform="translateY(-100%)":u.style.transform="translateY(0)"),x=e});const X={root:null,rootMargin:"0px",threshold:.1},$=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&t.target.classList.add("visible")})},X);document.querySelectorAll(".reveal, .reveal-left, .reveal-right, .reveal-scale").forEach(e=>{$.observe(e)});const l=document.createElement("div");l.className="cursor-follower";document.body.appendChild(l);let q=0,C=0,E=0,b=0;const w=.1;document.addEventListener("mousemove",e=>{q=e.clientX,C=e.clientY});function A(){E+=(q-E)*w,b+=(C-b)*w,l.style.left=E+"px",l.style.top=b+"px",requestAnimationFrame(A)}A();document.addEventListener("mouseleave",()=>{l.style.opacity="0"});document.addEventListener("mouseenter",()=>{l.style.opacity="1"});document.querySelectorAll(".magnetic-btn").forEach(e=>{e.addEventListener("mousemove",t=>{const o=t,s=e.getBoundingClientRect(),n=o.clientX-s.left-s.width/2,a=o.clientY-s.top-s.height/2;e.style.transform=`translate(${n*.3}px, ${a*.3}px)`}),e.addEventListener("mouseleave",()=>{e.style.transform="translate(0, 0)"})});function j(e){const t=parseInt(e.getAttribute("data-target")||"0"),o=2e3,s=0,n=performance.now();function a(m){const Y=m-n,y=Math.min(Y/o,1),M=1-Math.pow(1-y,4),T=Math.floor(s+(t-s)*M);e.textContent=T.toLocaleString(),y<1&&requestAnimationFrame(a)}requestAnimationFrame(a)}const O=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(j(t.target),O.unobserve(t.target))})},{threshold:.5});document.querySelectorAll(".count-up").forEach(e=>O.observe(e));window.addEventListener("scroll",()=>{const e=window.pageYOffset;document.querySelectorAll("[data-parallax]").forEach(t=>{const o=parseFloat(t.dataset.parallax||"0.5");t.style.transform=`translateY(${e*o}px)`})});
