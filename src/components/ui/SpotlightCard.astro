---
/**
 * SpotlightCard Component
 * Interactive card with mouse-following spotlight effect
 * Creates a subtle radial gradient that follows cursor position
 */

interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<div class:list={["spotlight-card group relative overflow-hidden rounded-xl bg-zinc-900/80 border border-white/10 p-6 transition-all duration-300", className]}>
  <!-- Spotlight overlay - follows mouse -->
  <div class="spotlight-overlay pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
  
  <!-- Content slot -->
  <div class="relative z-10">
    <slot />
  </div>
</div>

<style>
  .spotlight-card {
    --mouse-x: 50%;
    --mouse-y: 50%;
  }
  
  .spotlight-overlay {
    background: radial-gradient(
      350px circle at var(--mouse-x) var(--mouse-y),
      rgba(255, 255, 255, 0.06) 0%,
      transparent 100%
    );
  }
  
  /* Subtle border glow on hover */
  .spotlight-card::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: radial-gradient(
      400px circle at var(--mouse-x) var(--mouse-y),
      rgba(59, 130, 246, 0.3) 0%,
      transparent 100%
    );
    -webkit-mask: 
      linear-gradient(#fff 0 0) content-box, 
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0;
    transition: opacity 0.4s ease;
    pointer-events: none;
  }
  
  .spotlight-card:hover::before {
    opacity: 1;
  }
</style>

<script>
  // Mouse tracking for spotlight effect
  document.querySelectorAll('.spotlight-card').forEach((card) => {
    card.addEventListener('mousemove', (e: Event) => {
      const mouseEvent = e as MouseEvent;
      const rect = (card as HTMLElement).getBoundingClientRect();
      const x = mouseEvent.clientX - rect.left;
      const y = mouseEvent.clientY - rect.top;
      
      (card as HTMLElement).style.setProperty('--mouse-x', `${x}px`);
      (card as HTMLElement).style.setProperty('--mouse-y', `${y}px`);
    });
    
    // Reset on mouse leave
    card.addEventListener('mouseleave', () => {
      (card as HTMLElement).style.setProperty('--mouse-x', '50%');
      (card as HTMLElement).style.setProperty('--mouse-y', '50%');
    });
  });
</script>
